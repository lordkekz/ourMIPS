<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:ourMIPSSharp_App.ViewModels"
             xmlns:i="clr-namespace:Projektanker.Icons.Avalonia;assembly=Projektanker.Icons.Avalonia"
             xmlns:avaloniaEdit="https://github.com/avaloniaui/avaloniaedit"
             xmlns:views="clr-namespace:ourMIPSSharp_App.Views"
             mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="450"
             x:Class="ourMIPSSharp_App.Views.MainView">
    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
         to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <viewModels:MainViewModel />
    </Design.DataContext>
    <Grid Background="{DynamicResource SystemChromeBlackMediumColor}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" MinWidth="200" />
            <ColumnDefinition Width="{StaticResource GridSplitterThickness}" />
            <ColumnDefinition Width="*" MinWidth="200" />
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" Grid.RowSpan="3" Orientation="Vertical"
                    Classes="Menu_Sidebar">
            <Button i:Attached.Icon="fa-solid fa-sd-card"
                    Command="{Binding MemInitCommand}" />
            <Button i:Attached.Icon="fa-solid fa-screwdriver-wrench"
                    Command="{Binding RebuildCommand}" />
            <Button i:Attached.Icon="fa-solid fa-bug"
                    Command="{Binding DebugCommand}" />
            <Button i:Attached.Icon="fa-solid fa-play"
                    Command="{Binding RunCommand}" />
        </StackPanel>
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" MinHeight="200" />
                <RowDefinition Height="{StaticResource GridSplitterThickness}" />
                <RowDefinition Height="*" MinHeight="200" />
            </Grid.RowDefinitions>
            <avaloniaEdit:TextEditor Grid.Row="0" Name="Editor"
                                   HorizontalScrollBarVisibility="Auto"
                                   VerticalScrollBarVisibility="Visible"
                                   HorizontalAlignment="Stretch"
                                   VerticalAlignment="Stretch"
                                   ShowLineNumbers="True"
                                   Document="{Binding Document}"
                                   WordWrap="False"
                                   FontFamily="Cascadia Code,Consolas,Menlo,Monospace"
                                   FontWeight="Light" />
            <GridSplitter Grid.Row="1" ResizeDirection="Rows" />
            <views:ConsoleView Grid.Row="2"
                               Name="ConView"
                               DataContext="{Binding Console}" />
        </Grid>
        <GridSplitter ZIndex="1" Grid.Column="2" Grid.RowSpan="3" ResizeDirection="Columns" />
        <Grid Grid.Column="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" MinHeight="200" />
                <RowDefinition Height="{StaticResource GridSplitterThickness}" />
                <RowDefinition Height="*" MinHeight="200" />
            </Grid.RowDefinitions>
            <TabControl Grid.Row="0">
                <TabItem Header="Registers">
                    <Grid ColumnDefinitions="Auto, Auto, *" RowDefinitions="Auto, Auto, *" HorizontalAlignment="Stretch">
                        <TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left"
                                   Margin="0,0,24,0" Text="Program Counter:" />
                        <TextBlock Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right"
                                   Margin="0,0,24,0" Text="{Binding ProgramCounter}" />
                        <TextBlock Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" Text="Overflow Flag:" />
                        <TextBlock Grid.Row="1" Grid.Column="1" HorizontalAlignment="Right"
                                   Text="{Binding OverflowFlag}" />
                        <DataGrid Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="2" Items="{Binding  RegisterList}"
                                  AutoGenerateColumns="False"
                                  CanUserReorderColumns="True" CanUserResizeColumns="False" CanUserSortColumns="False"
                                  SelectionChanged="DataGrid_OnSelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Id"
                                                    Binding="{Binding RegId}"
                                                    FontFamily="Courier New"
                                                    FontWeight="Light" />
                                <DataGridTextColumn Header="Name"
                                                    Binding="{Binding Name}"
                                                    FontFamily="Cascadia Code,Consolas,Menlo,Monospace"
                                                    FontWeight="ExtraLight" />
                                <DataGridTemplateColumn Header="Value">
                                    <DataTemplate DataType="viewModels:RegisterEntry">
                                        <TextBlock HorizontalAlignment="Right"
                                                   Text="{Binding ValueDecimal}"
                                                   FontFamily="Courier New"
                                                   FontWeight="Light" />
                                    </DataTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Header="Value (Hex)"
                                                    Binding="{Binding ValueHex}"
                                                    FontFamily="Courier New"
                                                    FontWeight="Light" />
                                <DataGridTextColumn Header="Value (Binary)"
                                                    Width="*"
                                                    Binding="{Binding ValueBinary}"
                                                    FontFamily="Courier New"
                                                    FontWeight="Light" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </TabItem>
                <TabItem Header="Memory">
                    <DataGrid Grid.Row="2" Items="{Binding  MemoryList}" AutoGenerateColumns="False"
                              CanUserReorderColumns="True" CanUserResizeColumns="False" CanUserSortColumns="False"
                              SelectionChanged="DataGrid_OnSelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Address"
                                                Binding="{Binding AddressDecimal}"
                                                FontFamily="Courier New" />
                            <DataGridTextColumn Header="Address (Hex)"
                                                Binding="{Binding AddressHex}"
                                                FontFamily="Courier New" />
                            <DataGridTemplateColumn Header="Value">
                                <DataTemplate DataType="viewModels:RegisterEntry">
                                    <TextBlock HorizontalAlignment="Right"
                                               Text="{Binding ValueDecimal}"
                                               FontFamily="Courier New" />
                                </DataTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Value (Hex)"
                                                Binding="{Binding ValueHex}"
                                                FontFamily="Courier New" />
                            <DataGridTextColumn Header="Value (Binary)"
                                                Width="*"
                                                Binding="{Binding ValueBinary}"
                                                FontFamily="Courier New" />
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
            </TabControl>
            <GridSplitter ZIndex="1" Grid.Row="1" ResizeDirection="Rows" />
            <DataGrid Grid.Row="2" Items="{Binding  InstructionList}" AutoGenerateColumns="False"
                      CanUserReorderColumns="True" CanUserResizeColumns="False" CanUserSortColumns="False"
                      SelectionChanged="DataGrid_OnSelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Line"
                                        Binding="{Binding LineNumber}"
                                        FontFamily="Cascadia Code,Consolas,Menlo,Monospace"
                                        FontWeight="ExtraLight" />
                    <DataGridTextColumn Header="Address"
                                        Binding="{Binding AddressDecimal}"
                                        FontFamily="Courier New" />
                    <DataGridTextColumn Header="Address (Hex)"
                                        Binding="{Binding AddressHex}"
                                        FontFamily="Courier New" />
                    <DataGridTextColumn Header="Bytecode"
                                        Binding="{Binding Bytecode}"
                                        FontFamily="Courier New" />
                    <DataGridTextColumn Header="Interpreted as"
                                        Width="*"
                                        Binding="{Binding InstructionString}"
                                        FontFamily="Cascadia Code,Consolas,Menlo,Monospace"
                                        FontWeight="ExtraLight" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</UserControl>